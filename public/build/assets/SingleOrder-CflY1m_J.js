import{r as a,j as e,d as A,W as B,y as J}from"./app-21hr-4y7.js";import{D as N}from"./Disclose-Bi8GMOkl.js";import{u as W,M as H,S as V}from"./Swal-BnItVo33.js";import{B as S}from"./Button-FXnIFPIj.js";import{T}from"./TrashIcon-EhmcWBUd.js";import{I as q}from"./InputError-DpH7u0Sz.js";import{F as I}from"./PlusIcon-Bd58lnfK.js";import{F as G}from"./ChevronRightIcon-DmLMQHf-.js";import{C as P}from"./Currency-BtIRrGUY.js";function Q({title:t,titleId:s,...l},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},l),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Y=a.forwardRef(Q),U={test:"TEST",medication:"MEDICATION",appointment:"appointment"};function Z({...t}){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("g",{clipPath:"url(#clip0_3840_4479)",children:e.jsx("path",{d:"M10.6676 10.6666L8.00095 7.99995M8.00095 7.99995L5.33428 10.6666M8.00095 7.99995V13.9999M13.5943 12.2599C14.2445 11.9055 14.7582 11.3445 15.0542 10.6657C15.3502 9.98686 15.4118 9.22877 15.2291 8.51107C15.0464 7.79338 14.6299 7.15696 14.0454 6.70225C13.4609 6.24754 12.7415 6.00044 12.001 5.99995H11.161C10.9592 5.21944 10.5831 4.49484 10.0609 3.88061C9.53877 3.26638 8.88418 2.77852 8.14635 2.45369C7.40852 2.12886 6.60665 1.97552 5.80103 2.0052C4.99541 2.03489 4.20699 2.24682 3.49507 2.62506C2.78314 3.0033 2.16622 3.53802 1.6907 4.189C1.21517 4.83999 0.89341 5.59031 0.749603 6.38354C0.605797 7.17678 0.643687 7.9923 0.860426 8.76879C1.07716 9.54528 1.46711 10.2625 2.00095 10.8666",stroke:"#16D671",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_3840_4479",children:e.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}var g=function(){return g=Object.assign||function(t){for(var s,l=1,o=arguments.length;l<o;l++)for(var r in s=arguments[l])Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);return t},g.apply(this,arguments)};function F(t,s,l,o){return new(l||(l=Promise))(function(r,c){function i(d){try{f(o.next(d))}catch(n){c(n)}}function m(d){try{f(o.throw(d))}catch(n){c(n)}}function f(d){var n;d.done?r(d.value):(n=d.value,n instanceof l?n:new l(function(h){h(n)})).then(i,m)}f((o=o.apply(t,[])).next())})}function L(t,s){var l,o,r,c,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function m(f){return function(d){return function(n){if(l)throw new TypeError("Generator is already executing.");for(;c&&(c=0,n[0]&&(i=0)),i;)try{if(l=1,o&&(r=2&n[0]?o.return:n[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,o=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!((r=r.length>0&&r[r.length-1])||n[0]!==6&&n[0]!==2)){i=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){i.label=n[1];break}if(n[0]===6&&i.label<r[1]){i.label=r[1],r=n;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(n);break}r[2]&&i.ops.pop(),i.trys.pop();continue}n=s.call(t,i)}catch(h){n=[6,h],o=0}finally{l=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([f,d])}}}typeof SuppressedError=="function"&&SuppressedError,function(t){if(typeof window>"u")return;const s=document.createElement("style");s.setAttribute("type","text/css"),s.innerHTML=t,document.head.appendChild(s)}(".simplePDF_container{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:fixed;display:flex;box-sizing:border-box;align-items:center;justify-content:center;height:100vh;width:100%;z-index:999999;padding:16px;top:0;left:0;background:rgba(0,0,0,.5)}.simplePDF_content{width:100%;height:100%;position:relative;box-sizing:border-box}.simplePDF_iframeContainer{overflow:hidden;background:#f1f7ff;border-radius:6px;width:100%;height:100%}.simplePDF_iframe{border:none;border-radius:6px;width:100%;height:100%}.simplePDF_close{z-index:1;position:absolute;top:-12px;right:-12px;border:none;padding:6px;border-radius:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.24);cursor:pointer;background:#ff5959;text-shadow:1px 1px #243889}.simplePDF_close svg{fill:#fff;width:14px;height:14px}.simplePDF_close:hover{box-shadow:0 2px 4px rgba(0,0,0,.1),0 4px 4px rgba(0,0,0,.24)}");var $=function(){return a.createElement("svg",{height:"512",viewBox:"0 0 512 512",width:"512",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M443.6 387.1 312.4 255.4l131.5-130c5.4-5.4 5.4-14.2 0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L256 197.8 124.9 68.3c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L68 105.9c-5.4 5.4-5.4 14.2 0 19.6l131.5 130L68.4 387.1c-2.6 2.6-4.1 6.1-4.1 9.8 0 3.7 1.4 7.2 4.1 9.8l37.4 37.6c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1L256 313.1l130.7 131.1c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1l37.4-37.6c2.6-2.6 4.1-6.1 4.1-9.8-.1-3.6-1.6-7.1-4.2-9.7z"}))},M=function(t){return t.mode==="inline"},K=a.forwardRef(function(t,s){var l=t.className,o=t.style;return a.createElement("iframe",{ref:s,className:l,style:g({border:0},o)})}),X=a.forwardRef(function(t,s){var l=t.children,o=t.editorURL,r=a.useState(!1),c=r[0],i=r[1],m=a.useCallback(function(d){d.preventDefault(),i(!0)},[]),f=a.useCallback(function(){i(!1)},[]);return a.createElement(a.Fragment,null,c&&A.createPortal(a.createElement("div",{className:"simplePDF_container","aria-modal":"true"},a.createElement("div",{className:"simplePDF_content"},a.createElement("button",{onClick:f,className:"simplePDF_close","aria-label":"Close PDF editor modal"},a.createElement($,null)),a.createElement("div",{className:"simplePDF_iframeContainer"},a.createElement("iframe",{ref:s,referrerPolicy:"no-referrer-when-downgrade",className:"simplePDF_iframe",src:o})))),document.body),a.cloneElement(l,{onClick:m}))}),z=function(t){var s,l,o,r,c=t.context,i=t.companyIdentifier,m=t.locale,f=a.useState({type:null,value:null,isEditorReady:!1}),d=f[0],n=f[1],h=a.useRef(null),y=M(t)?(s=t.documentURL)!==null&&s!==void 0?s:null:(r=(o=(l=t.children)===null||l===void 0?void 0:l.props)===null||o===void 0?void 0:o.href)!==null&&r!==void 0?r:null;a.useEffect(function(){y&&F(void 0,void 0,void 0,function(){var u,v,x;return L(this,function(p){switch(p.label){case 0:return[4,fetch(y,{method:"GET",credentials:"same-origin"})];case 1:if(!(u=p.sent()).ok)throw new Error("Failed to retrieve the document: ".concat(JSON.stringify({status:u.status,url:y})));return[4,u.blob()];case 2:return v=p.sent(),x=new FileReader,[4,new Promise(function(b,j){x.onload=b,x.onerror=j,x.readAsDataURL(v)})];case 3:return p.sent(),[2,x.result]}})}).then(function(u){return n(function(v){return g(g({},v),{type:"iframe_event",value:u})})}).catch(function(){n(function(u){return g(g({},u),{type:"cors_proxy_fallback",value:y})})})},[y]);var E=a.useMemo(function(){return"https://".concat(i??"embed",".simplepdf.com")},[i]);a.useEffect(function(){d.isEditorReady&&d.type==="iframe_event"&&d.value!==null&&function(u){var v=u.iframeRef,x=u.documentDataURL,p=u.editorDomain;F(void 0,void 0,void 0,function(){var b,j,w;return L(this,function(_){return b=new URL(p),(w=(j=v.current)===null||j===void 0?void 0:j.contentWindow)===null||w===void 0||w.postMessage(JSON.stringify({type:"LOAD_DOCUMENT",data:{data_url:x}}),b.origin),[2]})})}({iframeRef:h,documentDataURL:d.value,editorDomain:E})},[d,E]);var C=a.useCallback(function(u){return F(void 0,void 0,void 0,function(){var v,x,p,b,j,w;return L(this,function(_){switch(_.label){case 0:if(v=new URL(u.origin).origin,x=new URL(E).origin,v!==x)return[2];if(u.source!==((j=h.current)===null||j===void 0?void 0:j.contentWindow))return[2];switch(p=function(){try{return JSON.parse(u.data)}catch{return console.error("Failed to parse iFrame event payload"),null}}(),p==null?void 0:p.type){case"EDITOR_READY":return[3,1];case"DOCUMENT_LOADED":case"SUBMISSION_SENT":return[3,2]}return[3,6];case 1:return n(function(O){return g(g({},O),{isEditorReady:!0})}),[2];case 2:return _.trys.push([2,4,,5]),[4,(w=t.onEmbedEvent)===null||w===void 0?void 0:w.call(t,p)];case 3:return _.sent(),[3,5];case 4:return b=_.sent(),console.error("onEmbedEvent failed to execute: ".concat(JSON.stringify(b))),[3,5];case 5:case 6:return[2]}})})},[t.onEmbedEvent,E]);a.useEffect(function(){return window.addEventListener("message",C,!1),function(){return window.removeEventListener("message",C)}},[C]);var D=a.useMemo(function(){if(!c)return null;try{return encodeURIComponent(btoa(JSON.stringify(c)))}catch(u){return console.error("Failed to encode the context: ".concat(JSON.stringify(u)),{context:c}),null}},[JSON.stringify(c)]),R=a.useMemo(function(){var u=new URL("/".concat(m??"en","/editor"),E);return D&&u.searchParams.set("context",D),y&&u.searchParams.set("loadingPlaceholder","true"),(d==null?void 0:d.type)==="cors_proxy_fallback"&&(d==null?void 0:d.value)!==null&&u.searchParams.set("open",d.value),u.href},[E,y,D,d,m]),k=M(t);return a.useEffect(function(){k&&h&&h.current&&(h.current.src=R)},[R,k]),k?a.createElement(K,{className:t.className,style:t.style,ref:h}):a.createElement(X,{children:t.children,editorURL:R,ref:h})};function ee({onChange:t=null}){const[s,l]=a.useState([]),o=c=>{const i=c.currentTarget.files;for(let m=0;m<i.length;m++){const f=i[m];f.preview=URL.createObjectURL(f),l([...s,f])}},r=c=>{c.preventDefault(),l([])};return a.useEffect(()=>{t&&t(s)},[s]),e.jsxs("label",{className:"p-5 min-h-40 flex items-center justify-center border border-dashed border-[#0000001A] rounded-xl",children:[e.jsx(N,{show:s.length<1,children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{children:e.jsx("div",{className:"p-2 bg-[#6768FB0D] rounded-full",children:e.jsx(Z,{className:"size-5"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Click to Upload"}),e.jsx("p",{className:"text-muted text-xs",children:"PDF - 10MB max."}),e.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:o})]})]})}),e.jsx(N,{show:s.length>0,children:s.map((c,i)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{children:e.jsx("div",{className:"p-2 bg-[#6768FB0D] rounded-full",children:e.jsx(Y,{className:"size-6 text-primary"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:c.name}),e.jsxs("p",{className:"text-muted text-xs",children:["Last Modified: ",c.lastModifiedDate.toDateString()]})]})]}),e.jsxs("div",{className:"flex  space-x-3 justify-center",children:[e.jsx(z,{children:e.jsx("a",{href:c.preview,className:"btn btn-light p-1 px-2",children:"Preview"})}),e.jsxs(S,{onClick:r,className:"btn-light p-1 px-2 text-red-600",children:[e.jsx(T,{className:"stroke-red-600"})," Remove"]})]})]},i))})]})}const te=({order:t})=>{var c;const s=W(),l=B({files:[]});function o(){l.post(route("orders.tests.upload",{order:t.order_item_id}),{onSuccess(){s.close(),l.reset()}})}function r(){var i;J.get(route("orders.tests.delete",{order:t.order_item_id,testResult:(i=t.result)==null?void 0:i.id}))}return e.jsxs(e.Fragment,{children:[e.jsxs(N,{show:!t.result,children:[e.jsx("button",{onClick:s.open,className:"inline-flex rounded-lg py-2 px-3 text-primary hover:bg-primary/20 bg-primary/10",children:"Upload result"}),e.jsx(H,{className:"py-0 !max-w-2xl",...s,children:e.jsxs("div",{className:"md:flex md:divide-x",children:[e.jsxs("div",{className:"md:w-1/2 pt-5 md:pe-6",children:[e.jsx("h4",{className:"font-semibold",children:"Complete Order"}),e.jsx("p",{className:"text-muted text-sm",children:"To complete this order upload the test result for patient use"})]}),e.jsxs("div",{className:"md:w-1/2 py-5 md:ps-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Upload Test Result"}),e.jsxs("div",{children:[e.jsx(ee,{onChange:i=>l.setData("files",i)}),e.jsx(q,{message:l.errors.files})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(S,{onClick:s.close,className:"btn-light",children:"Cancel"}),e.jsxs(S,{className:"btn-primary flex-1",loading:l.processing,onClick:o,children:["Upload test result ",e.jsx(I,{className:"size-4"})]})]})]})]})})]}),e.jsx(N,{show:!!t.result,children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(z,{children:e.jsxs("a",{href:(c=t.result)==null?void 0:c.result,className:"text-primary flex space-x-4 items-center",children:["View Test Result ",e.jsx(G,{className:"size-4"})]})}),e.jsx(V,{onConfirm:r,type:"warning",onClick:r,className:"",children:e.jsx(T,{className:"size-5 stroke-red-600"})})]})})]})};function re({order:t}){return e.jsxs("tr",{children:[e.jsx("td",{children:t.product_name}),e.jsx("td",{children:t.product_type}),e.jsx("td",{children:t.quantity}),e.jsxs("td",{children:[e.jsx(P,{})," ",t.price.toLocaleString()]}),e.jsxs("td",{children:[e.jsx(P,{})," ",(t.price*t.quantity).toLocaleString()]}),e.jsxs("td",{className:"text-left",children:[e.jsx(N,{show:t.product_type==U.medication}),e.jsx(N,{show:t.product_type==U.test,children:e.jsx(te,{order:t})})]})]})}function me({order:t}){const[s,l]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:t.order_id}),e.jsx("td",{children:t.user.full_name}),e.jsxs("td",{children:[e.jsx(P,{})," ",t.order_value]}),e.jsx("td",{children:t.status}),e.jsx("td",{children:"8898921"}),e.jsx("td",{children:t.is_order_paid?"Paid":"Unpaid"}),e.jsx("td",{className:"text-left flex gap-2",children:e.jsx("button",{className:"border-2 p-1 bg-white rounded-lg",onClick:()=>l(!s),children:e.jsx(I,{className:"size-4"})})})]}),e.jsx(N,{show:s,children:e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"bg-gray-50",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h4",{className:"font-medium",children:"Order Items"})}),e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Product Type"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Action"})]}),t.items.map(o=>e.jsx(re,{order:o},o.order_item_id))]})})]})})})]})}export{me as S};
