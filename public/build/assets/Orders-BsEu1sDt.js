import{r as l,j as e,c as W,W as H,y as G,Y as V}from"./app-CAUEZc0i.js";import{S as $}from"./SettingIcon-C6Dws3sq.js";import{D as q,r as Y,I as Q,F as Z,g as K,E as k}from"./AuthenticatedLayout-pxGpmzW_.js";import{S as C,D as _}from"./StatsItem-CnPNvNgC.js";import{D as N}from"./Disclose-Cba31f_p.js";import{u as X,M as ee,S as te}from"./Swal-bun7Bi3r.js";import{B as U}from"./Button-wM9EFlir.js";import{T as z}from"./TrashIcon-Dz5FXYpB.js";import{I as re}from"./InputError-B_3mIoLM.js";import{F as B}from"./PlusIcon-XMVRxzYU.js";import{F as se}from"./ChevronRightIcon-8cxl9u31.js";import{C as M}from"./Currency-BDUNyYnt.js";import{F as ne}from"./MagnifyingGlassIcon-BXedVAgB.js";function ie({title:t,titleId:n,...c},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},c),t?l.createElement("title",{id:n},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ae=l.forwardRef(ie),I={test:"TEST",medication:"MEDICATION",appointment:"appointment"};function le({...t}){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("g",{clipPath:"url(#clip0_3840_4479)",children:e.jsx("path",{d:"M10.6676 10.6666L8.00095 7.99995M8.00095 7.99995L5.33428 10.6666M8.00095 7.99995V13.9999M13.5943 12.2599C14.2445 11.9055 14.7582 11.3445 15.0542 10.6657C15.3502 9.98686 15.4118 9.22877 15.2291 8.51107C15.0464 7.79338 14.6299 7.15696 14.0454 6.70225C13.4609 6.24754 12.7415 6.00044 12.001 5.99995H11.161C10.9592 5.21944 10.5831 4.49484 10.0609 3.88061C9.53877 3.26638 8.88418 2.77852 8.14635 2.45369C7.40852 2.12886 6.60665 1.97552 5.80103 2.0052C4.99541 2.03489 4.20699 2.24682 3.49507 2.62506C2.78314 3.0033 2.16622 3.53802 1.6907 4.189C1.21517 4.83999 0.89341 5.59031 0.749603 6.38354C0.605797 7.17678 0.643687 7.9923 0.860426 8.76879C1.07716 9.54528 1.46711 10.2625 2.00095 10.8666",stroke:"#16D671",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_3840_4479",children:e.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}var g=function(){return g=Object.assign||function(t){for(var n,c=1,i=arguments.length;c<i;c++)for(var r in n=arguments[c])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},g.apply(this,arguments)};function L(t,n,c,i){return new(c||(c=Promise))(function(r,o){function a(d){try{x(i.next(d))}catch(s){o(s)}}function m(d){try{x(i.throw(d))}catch(s){o(s)}}function x(d){var s;d.done?r(d.value):(s=d.value,s instanceof c?s:new c(function(h){h(s)})).then(a,m)}x((i=i.apply(t,[])).next())})}function P(t,n){var c,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function m(x){return function(d){return function(s){if(c)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(c=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||s[0]!==6&&s[0]!==2)){a=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(s[0]===6&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=n.call(t,a)}catch(h){s=[6,h],i=0}finally{c=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([x,d])}}}typeof SuppressedError=="function"&&SuppressedError,function(t){if(typeof window>"u")return;const n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t,document.head.appendChild(n)}(".simplePDF_container{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:fixed;display:flex;box-sizing:border-box;align-items:center;justify-content:center;height:100vh;width:100%;z-index:999999;padding:16px;top:0;left:0;background:rgba(0,0,0,.5)}.simplePDF_content{width:100%;height:100%;position:relative;box-sizing:border-box}.simplePDF_iframeContainer{overflow:hidden;background:#f1f7ff;border-radius:6px;width:100%;height:100%}.simplePDF_iframe{border:none;border-radius:6px;width:100%;height:100%}.simplePDF_close{z-index:1;position:absolute;top:-12px;right:-12px;border:none;padding:6px;border-radius:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.24);cursor:pointer;background:#ff5959;text-shadow:1px 1px #243889}.simplePDF_close svg{fill:#fff;width:14px;height:14px}.simplePDF_close:hover{box-shadow:0 2px 4px rgba(0,0,0,.1),0 4px 4px rgba(0,0,0,.24)}");var ce=function(){return l.createElement("svg",{height:"512",viewBox:"0 0 512 512",width:"512",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M443.6 387.1 312.4 255.4l131.5-130c5.4-5.4 5.4-14.2 0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L256 197.8 124.9 68.3c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L68 105.9c-5.4 5.4-5.4 14.2 0 19.6l131.5 130L68.4 387.1c-2.6 2.6-4.1 6.1-4.1 9.8 0 3.7 1.4 7.2 4.1 9.8l37.4 37.6c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1L256 313.1l130.7 131.1c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1l37.4-37.6c2.6-2.6 4.1-6.1 4.1-9.8-.1-3.6-1.6-7.1-4.2-9.7z"}))},A=function(t){return t.mode==="inline"},oe=l.forwardRef(function(t,n){var c=t.className,i=t.style;return l.createElement("iframe",{ref:n,className:c,style:g({border:0},i)})}),de=l.forwardRef(function(t,n){var c=t.children,i=t.editorURL,r=l.useState(!1),o=r[0],a=r[1],m=l.useCallback(function(d){d.preventDefault(),a(!0)},[]),x=l.useCallback(function(){a(!1)},[]);return l.createElement(l.Fragment,null,o&&W.createPortal(l.createElement("div",{className:"simplePDF_container","aria-modal":"true"},l.createElement("div",{className:"simplePDF_content"},l.createElement("button",{onClick:x,className:"simplePDF_close","aria-label":"Close PDF editor modal"},l.createElement(ce,null)),l.createElement("div",{className:"simplePDF_iframeContainer"},l.createElement("iframe",{ref:n,referrerPolicy:"no-referrer-when-downgrade",className:"simplePDF_iframe",src:i})))),document.body),l.cloneElement(c,{onClick:m}))}),J=function(t){var n,c,i,r,o=t.context,a=t.companyIdentifier,m=t.locale,x=l.useState({type:null,value:null,isEditorReady:!1}),d=x[0],s=x[1],h=l.useRef(null),b=A(t)?(n=t.documentURL)!==null&&n!==void 0?n:null:(r=(i=(c=t.children)===null||c===void 0?void 0:c.props)===null||i===void 0?void 0:i.href)!==null&&r!==void 0?r:null;l.useEffect(function(){b&&L(void 0,void 0,void 0,function(){var u,j,f;return P(this,function(p){switch(p.label){case 0:return[4,fetch(b,{method:"GET",credentials:"same-origin"})];case 1:if(!(u=p.sent()).ok)throw new Error("Failed to retrieve the document: ".concat(JSON.stringify({status:u.status,url:b})));return[4,u.blob()];case 2:return j=p.sent(),f=new FileReader,[4,new Promise(function(y,v){f.onload=y,f.onerror=v,f.readAsDataURL(j)})];case 3:return p.sent(),[2,f.result]}})}).then(function(u){return s(function(j){return g(g({},j),{type:"iframe_event",value:u})})}).catch(function(){s(function(u){return g(g({},u),{type:"cors_proxy_fallback",value:b})})})},[b]);var E=l.useMemo(function(){return"https://".concat(a??"embed",".simplepdf.com")},[a]);l.useEffect(function(){d.isEditorReady&&d.type==="iframe_event"&&d.value!==null&&function(u){var j=u.iframeRef,f=u.documentDataURL,p=u.editorDomain;L(void 0,void 0,void 0,function(){var y,v,w;return P(this,function(D){return y=new URL(p),(w=(v=j.current)===null||v===void 0?void 0:v.contentWindow)===null||w===void 0||w.postMessage(JSON.stringify({type:"LOAD_DOCUMENT",data:{data_url:f}}),y.origin),[2]})})}({iframeRef:h,documentDataURL:d.value,editorDomain:E})},[d,E]);var F=l.useCallback(function(u){return L(void 0,void 0,void 0,function(){var j,f,p,y,v,w;return P(this,function(D){switch(D.label){case 0:if(j=new URL(u.origin).origin,f=new URL(E).origin,j!==f)return[2];if(u.source!==((v=h.current)===null||v===void 0?void 0:v.contentWindow))return[2];switch(p=function(){try{return JSON.parse(u.data)}catch{return console.error("Failed to parse iFrame event payload"),null}}(),p==null?void 0:p.type){case"EDITOR_READY":return[3,1];case"DOCUMENT_LOADED":case"SUBMISSION_SENT":return[3,2]}return[3,6];case 1:return s(function(T){return g(g({},T),{isEditorReady:!0})}),[2];case 2:return D.trys.push([2,4,,5]),[4,(w=t.onEmbedEvent)===null||w===void 0?void 0:w.call(t,p)];case 3:return D.sent(),[3,5];case 4:return y=D.sent(),console.error("onEmbedEvent failed to execute: ".concat(JSON.stringify(y))),[3,5];case 5:case 6:return[2]}})})},[t.onEmbedEvent,E]);l.useEffect(function(){return window.addEventListener("message",F,!1),function(){return window.removeEventListener("message",F)}},[F]);var O=l.useMemo(function(){if(!o)return null;try{return encodeURIComponent(btoa(JSON.stringify(o)))}catch(u){return console.error("Failed to encode the context: ".concat(JSON.stringify(u)),{context:o}),null}},[JSON.stringify(o)]),S=l.useMemo(function(){var u=new URL("/".concat(m??"en","/editor"),E);return O&&u.searchParams.set("context",O),b&&u.searchParams.set("loadingPlaceholder","true"),(d==null?void 0:d.type)==="cors_proxy_fallback"&&(d==null?void 0:d.value)!==null&&u.searchParams.set("open",d.value),u.href},[E,b,O,d,m]),R=A(t);return l.useEffect(function(){R&&h&&h.current&&(h.current.src=S)},[S,R]),R?l.createElement(oe,{className:t.className,style:t.style,ref:h}):l.createElement(de,{children:t.children,editorURL:S,ref:h})};function ue({onChange:t=null}){const[n,c]=l.useState([]),i=o=>{const a=o.currentTarget.files;for(let m=0;m<a.length;m++){const x=a[m];x.preview=URL.createObjectURL(x),c([...n,x])}},r=o=>{o.preventDefault(),c([])};return l.useEffect(()=>{t&&t(n)},[n]),e.jsxs("label",{className:"p-5 min-h-40 flex items-center justify-center border border-dashed border-[#0000001A] rounded-xl",children:[e.jsx(N,{show:n.length<1,children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{children:e.jsx("div",{className:"p-2 bg-[#6768FB0D] rounded-full",children:e.jsx(le,{className:"size-5"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Click to Upload"}),e.jsx("p",{className:"text-muted text-xs",children:"PDF - 10MB max."}),e.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:i})]})]})}),e.jsx(N,{show:n.length>0,children:n.map((o,a)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{children:e.jsx("div",{className:"p-2 bg-[#6768FB0D] rounded-full",children:e.jsx(ae,{className:"size-6 text-primary"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:o.name}),e.jsxs("p",{className:"text-muted text-xs",children:["Last Modified: ",o.lastModifiedDate.toDateString()]})]})]}),e.jsxs("div",{className:"flex  space-x-3 justify-center",children:[e.jsx(J,{children:e.jsx("a",{href:o.preview,className:"btn btn-light p-1 px-2",children:"Preview"})}),e.jsxs(U,{onClick:r,className:"btn-light p-1 px-2 text-red-600",children:[e.jsx(z,{className:"stroke-red-600"})," Remove"]})]})]},a))})]})}const me=({order:t})=>{var o;const n=X(),c=H({files:[]});function i(){c.post(route("orders.tests.upload",{order:t.order_item_id}),{onSuccess(){n.close(),c.reset()}})}function r(){var a;G.get(route("orders.tests.delete",{order:t.order_item_id,testResult:(a=t.result)==null?void 0:a.id}))}return e.jsxs(e.Fragment,{children:[e.jsxs(N,{show:!t.result,children:[e.jsx("button",{onClick:n.open,className:"inline-flex rounded-lg py-2 px-3 text-primary hover:bg-primary/20 bg-primary/10",children:"Upload result"}),e.jsx(ee,{className:"py-0 !max-w-2xl",...n,children:e.jsxs("div",{className:"md:flex md:divide-x",children:[e.jsxs("div",{className:"md:w-1/2 pt-5 md:pe-6",children:[e.jsx("h4",{className:"font-semibold",children:"Complete Order"}),e.jsx("p",{className:"text-muted text-sm",children:"To complete this order upload the test result for patient use"})]}),e.jsxs("div",{className:"md:w-1/2 py-5 md:ps-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Upload Test Result"}),e.jsxs("div",{children:[e.jsx(ue,{onChange:a=>c.setData("files",a)}),e.jsx(re,{message:c.errors.files})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(U,{onClick:n.close,className:"btn-light",children:"Cancel"}),e.jsxs(U,{className:"btn-primary flex-1",loading:c.processing,onClick:i,children:["Upload test result ",e.jsx(B,{className:"size-4"})]})]})]})]})})]}),e.jsx(N,{show:!!t.result,children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(J,{children:e.jsxs("a",{href:(o=t.result)==null?void 0:o.result,className:"text-primary flex space-x-4 items-center",children:["View Test Result ",e.jsx(se,{className:"size-4"})]})}),e.jsx(te,{onConfirm:r,type:"warning",onClick:r,className:"",children:e.jsx(z,{className:"size-5 stroke-red-600"})})]})})]})};function xe({order:t}){return e.jsxs("tr",{children:[e.jsx("td",{children:t.product_name}),e.jsx("td",{children:t.product_type}),e.jsx("td",{children:t.quantity}),e.jsxs("td",{children:[e.jsx(M,{})," ",t.price.toLocaleString()]}),e.jsxs("td",{children:[e.jsx(M,{})," ",(t.price*t.quantity).toLocaleString()]}),e.jsxs("td",{className:"text-left",children:[e.jsx(N,{show:t.product_type==I.medication}),e.jsx(N,{show:t.product_type==I.test,children:e.jsx(me,{order:t})})]})]})}function he({order:t}){const[n,c]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:t.no}),e.jsx("td",{children:t.order_id}),e.jsx("td",{children:t.user.full_name}),e.jsxs("td",{children:[e.jsx(M,{})," ",t.order_value]}),e.jsx("td",{children:t.status}),e.jsx("td",{children:"8898921"}),e.jsx("td",{children:t.is_order_paid?"Paid":"Unpaid"}),e.jsx("td",{className:"text-left flex gap-2",children:e.jsx("button",{className:"border-2 p-1 bg-white rounded-lg",onClick:()=>c(!n),children:e.jsx(B,{className:"size-4"})})})]}),e.jsx(N,{show:n,children:e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"bg-gray-50",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h4",{className:"font-medium",children:"Order Items"})}),e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Product Type"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Action"})]}),t.items.map(i=>e.jsx(xe,{order:i},i.order_item_id))]})})]})})})]})}function Fe({orders:t,total:n,completed:c,pending:i,revenue:r}){return e.jsxs(q,{title:"Manage Orders",children:[e.jsx(V,{title:"Manage Orders"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid md:grid-cols-4 grid-cols-2 gap-3 mb-5",children:[e.jsx(C,{title:"Total Orders",amount:n,direction:_.up,percentage:36}),e.jsx(C,{title:"Completed Orders",amount:c,direction:_.up,percentage:36}),e.jsx(C,{title:"Cancelled Orders",amount:i,direction:_.up,percentage:36}),e.jsx(C,{title:"Revenue Generated",amount:r,isPrice:!0,direction:_.up,percentage:36})]}),e.jsxs("div",{className:"card p-0 rounded-xl",children:[e.jsxs("div",{className:"p-4 md:flex space-y-2 md:space-y-0 justify-between",children:[e.jsxs("div",{className:"md:flex space-y-2 md:space-y-0 md:space-x-2",children:[e.jsx("div",{children:e.jsxs(Y,{children:[e.jsxs(Q,{className:"border-2 p-1 h-full px-3 items-center space-x-1 text-sm rounded-lg inline-flex",children:[e.jsx($,{className:"size-5"}),e.jsx("span",{className:"font-medium",children:"All Orders"}),e.jsx(Z,{className:"size-3"})]}),e.jsxs(K,{transition:!0,anchor:"bottom start",className:"min-w-32 origin-top-right mt-1 rounded-xl border-[1.5px] bg-white transition duration-100 ease-out text-sm",children:[e.jsx("div",{className:"p-1",children:e.jsx(k,{children:e.jsx("button",{className:"inline-flex w-full rounded-lg py-2 px-3 text-muted hover:bg-muted/10",children:"All Orders"})})}),e.jsx("div",{className:"border-t-[1.5px]"}),e.jsx("div",{className:"p-1",children:e.jsx(k,{children:e.jsx("button",{className:"inline-flex w-full rounded-lg py-2 px-3 text-muted hover:bg-muted/10",children:"Ongoing Orders"})})}),e.jsx("div",{className:"border-t-[1.5px]"}),e.jsx("div",{className:"p-1",children:e.jsx(k,{children:e.jsx("button",{className:"inline-flex w-full rounded-lg py-2 px-3 text-muted hover:bg-muted/10",children:"Completed Orders"})})})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"relative bg-[#F9FAFB] flex items-center border-[#E5E7EB] rounded-lg border-2",children:[e.jsx("div",{className:"px-2",children:e.jsx(ne,{className:"size-4 text-muted"})}),e.jsx("input",{type:"text",placeholder:"Search Orders",className:"pl-0 border-0 bg-transparent focus:ring-0 text-sm"})]})})]}),e.jsx("div",{})]}),e.jsx("div",{className:"border-t ml-4"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border-b",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Order Date"}),e.jsx("th",{children:"Payment Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:t.data.map(o=>e.jsx(he,{order:o},o.id))})]})})]})]})]})}export{Fe as default};
